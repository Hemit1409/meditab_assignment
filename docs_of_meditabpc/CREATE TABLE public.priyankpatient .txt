CREATE TABLE public.priyankpatient (
	pk int4 NOT NULL GENERATED ALWAYS AS IDENTITY,
	priyankpatientid int8 NOT NULL GENERATED ALWAYS AS (fngetprimarykey(pk, clientid)) STORED,
	firstname varchar(50) NOT NULL,
	lastname varchar(50) NOT NULL,
	middlename varchar(50) NULL,
	priyanksexid int4 NULL,
	chartnumber varchar(20) NULL GENERATED ALWAYS AS ((('CHART'::text || pk::text))) STORED,
	dob timestamp NULL,
	createddate timestamp NOT NULL,
	createdbyid int8 NOT NULL,
	lastmodifieddate timestamp NOT NULL,
	lastmodifiedbyid int8 NOT NULL,
	clientid int2 NOT NULL,
	machineid varchar(40) NOT NULL,
	oldsystemid varchar(40) NULL,
	isdeleted bool NOT NULL DEFAULT false,
	isactive bool NOT NULL DEFAULT true,
	issample bool NOT NULL DEFAULT false,
	requestid uuid NOT NULL DEFAULT uuid_generate_v1(),
	CONSTRAINT pk_priyankpatient PRIMARY KEY (priyankpatientid),
	CONSTRAINT fk_priyanksexid FOREIGN KEY (priyanksexid) REFERENCES public.priyanksex(priyanksexid)
);

CREATE TABLE public.priyankallergy (
	pk int4 NOT NULL GENERATED ALWAYS AS IDENTITY,
	priyankallergyid int8 NOT NULL GENERATED ALWAYS AS (fngetprimarykey(pk, clientid)) STORED,
	code varchar(20) NOT NULL,
	"name" varchar(200) NOT NULL,
	createddate timestamp NOT NULL,
	createdbyid int8 NOT NULL,
	lastmodifieddate timestamp NOT NULL,
	lastmodifiedbyid int8 NOT NULL,
	clientid int2 NOT NULL,
	machineid varchar(40) NOT NULL,
	oldsystemid varchar(40) NULL,
	isdeleted bool NOT NULL DEFAULT false,
	isactive bool NOT NULL DEFAULT true,
	issample bool NOT NULL DEFAULT false,
	requestid uuid NOT NULL DEFAULT uuid_generate_v1(),
	CONSTRAINT pk_priyankallergy PRIMARY KEY (priyankallergyid)
);

CREATE TABLE public.priyankpatientallergy (
	pk int4 NOT NULL GENERATED ALWAYS AS IDENTITY,
	priyankpatientallergyid int8 NOT NULL GENERATED ALWAYS AS (fngetprimarykey(pk, clientid)) STORED,
	priyankpatientid int4 NOT NULL,
	priyankallergyid int4 NOT NULL,
	note text NULL,
	createddate timestamp NOT NULL,
	createdbyid int8 NOT NULL,
	lastmodifieddate timestamp NOT NULL,
	lastmodifiedbyid int8 NOT NULL,
	clientid int2 NOT NULL,
	machineid varchar(40) NOT NULL,
	oldsystemid varchar(40) NULL,
	isdeleted bool NOT NULL DEFAULT false,
	issample bool NOT NULL DEFAULT false,
	requestid uuid NOT NULL DEFAULT uuid_generate_v1(),
	CONSTRAINT pk_priyankpatientallergy PRIMARY KEY (priyankpatientallergyid),
	CONSTRAINT fk_priyankallergy FOREIGN KEY (priyankallergyid) REFERENCES public.priyankallergy(priyankallergyid),
	CONSTRAINT fk_priyankpatient FOREIGN KEY (priyankpatientid) REFERENCES public.priyankpatient(priyankpatientid)
);


_PageNumber INTEGER = 1,
  			_PageSize INTEGER = 20,
			_hemitpatientsid  int default null,
			_FirstName varchar default '',
			_MiddleName varchar(100) default '', 
			_LastName varchar default '',
			_Gender varchar default '',
			_SexId varchar default null,
			_DOB varchar default null,
			_allergyname varchar default '',
			_orderby in varchar default 'HemitPatient.hemitpatientid',
			_ordertype in varchar default 'ASC',
			_userId varchar default null,
			_langId varchar default null,
			_lastmodifieddate varchar default null,
			_clientid varchar default null,
			_machineid varchar default null,
			_oldsystemid varchar default null,
			_requestid varchar default null,
			_issample varchar default null

